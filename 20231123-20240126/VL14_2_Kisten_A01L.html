<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Vorlage für three.js-Projekt</title>
  <script src="three.min.js"></script>
</head>

<body>
	<p id = "Hinweis"> 
	Kopieren Sie diese Datei und speichern Sie unter neuem Namen ab. 
	Anschließend geben Sie unten in der .html-Datei den Java-Script Code 
	für Ihr Projekt ein. Sie können diesen Absatz auch löschen.</p>
	
	<div id="myCanvas"> </div>
  
  <p id = "Hinweis2"> 
  Hier kommt noch ein Text.</p>

</body>


<script>

// Hier ist die Szenerie, in der sich alles abspielt:
    
  	var scene = new THREE.Scene();
    
    scene.background = new THREE.Color( 0xffffff );

// Hier steht die Kamera:
  	var aspect_ratio = window.innerWidth / window.innerHeight;
  
  	var camera = new THREE.PerspectiveCamera(75, aspect_ratio, 1, 10000);

    camera.position.set(0,0,500);
  	scene.add(camera);

// Hier ist der Stift, der in die Szenerie malt:
  	var renderer = new THREE.WebGLRenderer();
  	renderer.setSize(window.innerWidth, window.innerHeight);
  	document.getElementById('myCanvas').
  	appendChild(renderer.domElement);

// ******** Ab hier geben wir unser Projekt ein ********

  var shape = new THREE.BoxGeometry(100,100,100);
	var cover = new THREE.MeshNormalMaterial();
	var ball1 = new THREE.Mesh(shape, cover);
  ball1.position.set(-200,0,0);
	scene.add(ball1);

  var ball2 = new THREE.Mesh(shape, cover);
  ball2.position.set(+200,0,0);
  scene.add(ball2);



// Szene darstellen

	renderer.render(scene, camera);

// Animation hinzufügen

  var clock = new THREE.Clock();
  var counter = 0;
  var t_alt = 0;
  var delta_t = 0;
  var max_delta_t = 0;
  var min_delta_t = 1000;

  var meter = 100;
  var g_const = 9.81 * meter;
  var Hoehe = 3 * meter;

  // Variablen Numerik 2. Ball
  var v2 = 0;
  var y2 = 0;
  var v2_alt = 0;
  var y2_alt = Hoehe;

  // Debugging Informationen
  console.log("meter: " + meter + " g: " + 
    g_const + " h: " + Hoehe)
  animate();


// Funktionen

  function animate() {
    
    if (counter < 70) requestAnimationFrame(animate);
    var t = clock.getElapsedTime();

    // Ball1
    y1 = Hoehe - 0.5 * g_const * Math.pow(t,2);
    ball1.position.y = y1

    // Ball2
    FbM = - g_const; // FbM = Force (divided) by Mass
    y2 = y2_alt + v2_alt * delta_t;
    v2 = v2_alt + FbM * delta_t
    ball2.position.y = y2


    //if (counter % 2 == 0) renderer.render(scene, camera);
    renderer.render(scene, camera);

    // Messungen
    
    delta_t = t - t_alt;
    if (counter > 1) {
      if (max_delta_t < delta_t) max_delta_t = delta_t;
      if (min_delta_t > delta_t) min_delta_t = delta_t;
    }
    
    counter++;
    console.log(counter + " " + (delta_t * 1000) + " " + min_delta_t + " " + max_delta_t + " " + t/counter*1000);

    // aktuelle Werte werden alte Werte
    t_alt = t;
    y2_alt = y2;
    v2_alt = v2;
  }

</script>

</html>